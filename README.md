# Stocks_API
## Приложение для загрузки ценных бумаг и их историй, и дальнейшее отображение списка клиенту.
___


## Модели
___
* Security - ценна бумага.
* History - история оценной бумаге.


## Работа с приложением
___
1. Security контроллер
* /security - адрес по умолчанию, который выводит список ценных бумаг с историей(при наличии).
* /security/upload - загрузка файла(ов).
* /security/updateSecurity - обновление данных о ценной бумаге.
* /security/uploadForm - предоставление формы для загрузки файлов.
* /security/updateForm - предоставление формы для обновления ценной бумаги.
* /security/deleteSecurity - удаление ценной бумаги.

2. History контроллер
* /history/uploadHistory - загрузить файл с историей.
* /history/updateHistory - обновить историю.
* /history/updateForm - предоставление формы для обновления.
* /history/deleteHistory - удаление истории.

## Описание использованных методов и инструментов.
___
* Приложение написано на фреймворке Spring boot для автоматизации конфигураций
* В качестве БД использован PostgreSQL, миграции проводил через Liquibase. БД разворачивал на Docker.
* Для соединения с БД использован Hibernate.
* Для связи модели Security и History использовал поле "history" в модели Security, а в таблице представлено как "secid". 
  Связаны отношением OneToOne, one directional.
* Для предоставления формы использован шаблонизатор Thymeleaf, JavaScript не применялся, так как нет опыта работы.
* В качестве тестовых файлов для загрузки, использованы файлы xml, которые расположены в директории src/main/resources/xml. 
  В эти же файлы происходит конвертация Multipart файлов.
* Для конвертации в объект использовал JAXB.  
* Реализован глобальный обработчик ошибок

## Не выполенные части задания.
___
* Задание с запросом к стороннему API по адресу а http://iss.moex.com/iss/securities.xml?q=SEARCH_STRING выполнено частично с использованием WebClient.
  Запрос отравляется успешно, но не удаётся ивзлечь данные. Предполагаю, что связано с неполным понимание работы с xml файлом.
* Из-за не полного выполнения последнего задания загрузка файла только с историей по адресу  /security/upload приводит к ошибке.

## Что можно было бы добавить, но не хватило времени.
___
* Покрытие тестами
* При возникновении ошибки отправка соотвествующей формы с ошибкой. На данный момент реализован только вывод ошибки в json формате.
* Добавить swagger для документирования ендпоинтов.
